#!/usr/bin/env python3
"""
Vulnerability Calculator - Deterministic board-to-vulnerability mapping
Standard duplicate bridge vulnerability pattern (preset, never changes)
"""

def get_vulnerability_by_board(board_num):
    """
    Calculate vulnerability based on board number (standard duplicate bridge).
    This is PRESET INFORMATION - always the same for given board numbers.
    
    Pattern (repeats every 32 boards):
    - Boards 1,5,9,13,17,21,25,29: None (Gray #999)
    - Boards 2,10,18,26: NS (Red #ff6b6b)
    - Boards 3,11,19,27: EW (Teal #4ecdc4)
    - Boards 4,12,20,28: Both (Gold #ffd700)
    - Boards 6,14,22,30: NS (Red)
    - Boards 7,15,23,31: EW (Teal)
    - Boards 8,16,24,32: Both (Gold)
    
    Args:
        board_num (int): Board number (1-32, repeats)
    
    Returns:
        str: Vulnerability type ('None', 'NS', 'EW', or 'Both')
    """
    
    # Map for first 32 boards (pattern repeats after)
    vuln_map = {
        1: 'None',  2: 'NS',   3: 'EW',   4: 'Both',
        5: 'None',  6: 'NS',   7: 'EW',   8: 'Both',
        9: 'None',  10: 'NS',  11: 'EW',  12: 'Both',
        13: 'None', 14: 'NS',  15: 'EW',  16: 'Both',
        17: 'None', 18: 'NS',  19: 'EW',  20: 'Both',
        21: 'None', 22: 'NS',  23: 'EW',  24: 'Both',
        25: 'None', 26: 'NS',  27: 'EW',  28: 'Both',
        29: 'None', 30: 'NS',  31: 'EW',  32: 'Both'
    }
    
    # For board numbers beyond 32, use modulo to find position in cycle
    board_position = ((board_num - 1) % 32) + 1
    return vuln_map.get(board_position, 'None')


def get_vulnerability_color(vulnerability):
    """
    Get CSS color for vulnerability display.
    
    Args:
        vulnerability (str): Vulnerability type
    
    Returns:
        str: Hex color code
    """
    colors = {
        'None': '#999999',   # Gray
        'NS': '#ff6b6b',     # Red
        'EW': '#4ecdc4',     # Teal
        'Both': '#ffd700'    # Gold
    }
    return colors.get(vulnerability, '#999999')


if __name__ == '__main__':
    # Test the mapping
    print("Vulnerability Pattern (Boards 1-32):")
    print("-" * 50)
    distribution = {'None': 0, 'NS': 0, 'EW': 0, 'Both': 0}
    for board in range(1, 33):
        vuln = get_vulnerability_by_board(board)
        distribution[vuln] += 1
        print(f"Board {board:2d}: {vuln:4s}  Color: {get_vulnerability_color(vuln)}")
    
    print("\n" + "-" * 50)
    print("Distribution per 32 boards:")
    for vuln, count in sorted(distribution.items()):
        print(f"  {vuln:4s}: {count} boards")
