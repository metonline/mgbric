<!DOCTYPE html>
<html>
<head>
    <title>BBO LIN Format Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .container { max-width: 1400px; margin: 0 auto; }
        h1 { text-align: center; }
        .test-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0; }
        .test-box { background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .test-box h3 { padding: 15px; background: #667eea; color: white; margin: 0; }
        .test-box iframe { width: 100%; height: 400px; border: none; display: block; }
        .test-box pre { padding: 10px; background: #f0f0f0; margin: 0; font-size: 11px; overflow-x: auto; }
        .correct { background: #c8e6c9; }
        .label { padding: 10px 15px; background: #f5f5f5; border-top: 1px solid #ddd; font-size: 12px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>BBO LIN Format Testing - Board 1</h1>
        <p style="text-align: center; color: #666;">
            North should have: Q864, J97, T3, A842<br>
            South should have: 7, A53, K97, J97653<br>
            East should have: AKJT93, Q, QJ854, T<br>
            West should have: 52, KT8642, A62, KQ
        </p>
        
        <div class="test-grid">
            <!-- Test 1: N,S,E,W -->
            <div class="test-box">
                <h3>Test 1: N,S,E,W</h3>
                <iframe id="test1"></iframe>
                <div class="label">LIN: md|n[N],[S],[E],[W]|sv|n</div>
            </div>
            
            <!-- Test 2: N,S,W,E -->
            <div class="test-box">
                <h3>Test 2: N,S,W,E (Current)</h3>
                <iframe id="test2"></iframe>
                <div class="label">LIN: md|n[N],[S],[W],[E]|sv|n</div>
            </div>
            
            <!-- Test 3: E,W,N,S -->
            <div class="test-box">
                <h3>Test 3: E,W,N,S</h3>
                <iframe id="test3"></iframe>
                <div class="label">LIN: md|n[E],[W],[N],[S]|sv|n</div>
            </div>
            
            <!-- Test 4: W,E,S,N -->
            <div class="test-box">
                <h3>Test 4: W,E,S,N</h3>
                <iframe id="test4"></iframe>
                <div class="label">LIN: md|n[W],[E],[S],[N]|sv|n</div>
            </div>
            
            <!-- Test 5: S,N,W,E -->
            <div class="test-box">
                <h3>Test 5: S,N,W,E</h3>
                <iframe id="test5"></iframe>
                <div class="label">LIN: md|n[S],[N],[W],[E]|sv|n</div>
            </div>
            
            <!-- Test 6: E,N,W,S -->
            <div class="test-box">
                <h3>Test 6: E,N,W,S</h3>
                <iframe id="test6"></iframe>
                <div class="label">LIN: md|n[E],[N],[W],[S]|sv|n</div>
            </div>
        </div>
        
        <p style="text-align: center; margin-top: 40px; color: #666; font-size: 14px;">
            Which test box shows the correct hands in the correct seats? Reply with that test number!
        </p>
    </div>

    <script>
        async function runTests() {
            try {
                const response = await fetch('hands_database.json?v=' + Date.now());
                const db = await response.json();
                const board = db.events['hosgoru_04_01_2026'].boards['1'];
                const hands = board.hands;
                
                const formatHand = (playerHand) => {
                    if (!playerHand) return 'SDHC';
                    const suits = ['S', 'H', 'D', 'C'];
                    return suits.map(s => s + (playerHand[s] || '-')).join('');
                };
                
                const N = formatHand(hands.North);
                const S = formatHand(hands.South);
                const E = formatHand(hands.East);
                const W = formatHand(hands.West);
                
                const testOrders = [
                    { id: 'test1', name: 'N,S,E,W', order: [N, S, E, W] },
                    { id: 'test2', name: 'N,S,W,E', order: [N, S, W, E] },
                    { id: 'test3', name: 'E,W,N,S', order: [E, W, N, S] },
                    { id: 'test4', name: 'W,E,S,N', order: [W, E, S, N] },
                    { id: 'test5', name: 'S,N,W,E', order: [S, N, W, E] },
                    { id: 'test6', name: 'E,N,W,S', order: [E, N, W, S] }
                ];
                
                testOrders.forEach(test => {
                    const mdString = `n${test.order[0]},${test.order[1]},${test.order[2]},${test.order[3]}`;
                    const linString = `md|${mdString}|sv|n`;
                    const encodedLIN = encodeURIComponent(linString);
                    const bboURL = `https://www.bridgebase.com/tools/handviewer.html?lin=${encodedLIN}`;
                    
                    const iframe = document.getElementById(test.id);
                    iframe.src = bboURL;
                });
                
            } catch (error) {
                console.error('Error:', error);
                document.body.innerHTML += '<p style="color:red;">Error: ' + error.message + '</p>';
            }
        }
        
        runTests();
    </script>
</body>
</html>
