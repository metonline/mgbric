<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bridge Hands Viewer - 4 January 2026</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            max-width: 900px;
            width: 100%;
            padding: 30px;
        }
        
        .board-header {
            text-align: center;
            margin-bottom: 30px;
            display: flex;
            justify-content: center;
            gap: 40px;
        }
        
        .header-item {
            text-align: center;
        }
        
        .header-label {
            font-size: 12px;
            color: #999;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }
        
        .header-value {
            font-size: 32px;
            font-weight: bold;
            color: #333;
        }
        
        .bridge-table {
            display: grid;
            grid-template-columns: 160px 160px 160px;
            grid-template-rows: 160px 160px 160px;
            gap: 15px;
            margin: 40px 0;
            place-items: center;
        }
        
        .hand-box {
            width: 160px;
            height: 160px;
            border: 3px solid #667eea;
            border-radius: 8px;
            padding: 12px;
            background: #f9f9f9;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            font-size: 14px;
            overflow-y: auto;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .hand-box.north {
            grid-column: 2;
            grid-row: 1;
            background: linear-gradient(135deg, #e8f4f8 0%, #d0e8f2 100%);
            border-color: #0288d1;
        }
        
        .hand-box.west {
            grid-column: 1;
            grid-row: 2;
            background: linear-gradient(135deg, #f0f8f0 0%, #d8f0d8 100%);
            border-color: #43a047;
        }
        
        .hand-box.center {
            grid-column: 2;
            grid-row: 2;
            background: #f0f0f0;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 48px;
            color: #667eea;
        }
        
        .hand-box.east {
            grid-column: 3;
            grid-row: 2;
            background: linear-gradient(135deg, #f8f0f8 0%, #f0d8f0 100%);
            border-color: #7b1fa2;
        }
        
        .hand-box.south {
            grid-column: 2;
            grid-row: 3;
            background: linear-gradient(135deg, #f8f8e8 0%, #f0f0d8 100%);
            border-color: #f57f17;
        }
        
        .position-label {
            font-weight: bold;
            color: white;
            background: #667eea;
            padding: 4px 10px;
            border-radius: 4px;
            margin-bottom: 8px;
            text-align: center;
            width: 100%;
            font-size: 12px;
        }
        
        .suit-line {
            margin: 2px 0;
            font-weight: bold;
            font-size: 13px;
        }
        
        .spades { color: #000; }
        .hearts { color: #ff0000; }
        .diamonds { color: #ff0000; }
        .clubs { color: #000; }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 40px;
        }
        
        button {
            padding: 12px 30px;
            font-size: 16px;
            cursor: pointer;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 6px;
            transition: background 0.3s ease;
            font-weight: bold;
        }
        
        button:hover {
            background: #5568d3;
        }
        
        button:active {
            transform: scale(0.98);
        }
        
        .board-counter {
            text-align: center;
            color: #999;
            margin-top: 20px;
            font-size: 14px;
        }
        
        .results-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .results-modal.show {
            display: flex;
        }
        
        .results-content {
            background: white;
            border-radius: 12px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 50px rgba(0,0,0,0.3);
        }
        
        .results-content h2 {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
        }
        
        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .results-table th {
            background: #667eea;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: bold;
        }
        
        .results-table td {
            padding: 12px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .results-table tr:hover {
            background: #f5f5f5;
        }
        
        .close-results {
            display: block;
            margin: 20px auto 0;
            background: #999;
        }
        
        .close-results:hover {
            background: #777;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="board-header">
            <div class="header-item">
                <div class="header-label">Board</div>
                <div class="header-value" id="boardNum">1</div>
            </div>
            <div class="header-item">
                <div class="header-label">Dealer</div>
                <div class="header-value" id="dealer">-</div>
            </div>
            <div class="header-item">
                <div class="header-label">Vulnerability</div>
                <div class="header-value" style="font-size: 14px;" id="vuln">-</div>
            </div>
        </div>
        
        <div class="bridge-table">
            <div class="hand-box north" onclick="showResults()">
                <div class="position-label">NORTH</div>
                <div class="spades suit-line" id="northS">-</div>
                <div class="hearts suit-line" id="northH">-</div>
                <div class="diamonds suit-line" id="northD">-</div>
                <div class="clubs suit-line" id="northC">-</div>
            </div>
            
            <div class="hand-box west" onclick="showResults()">
                <div class="position-label">WEST</div>
                <div class="spades suit-line" id="westS">-</div>
                <div class="hearts suit-line" id="westH">-</div>
                <div class="diamonds suit-line" id="westD">-</div>
                <div class="clubs suit-line" id="westC">-</div>
            </div>
            
            <div class="hand-box center" id="centerText">♠</div>
            
            <div class="hand-box east" onclick="showResults()">
                <div class="position-label">EAST</div>
                <div class="spades suit-line" id="eastS">-</div>
                <div class="hearts suit-line" id="eastH">-</div>
                <div class="diamonds suit-line" id="eastD">-</div>
                <div class="clubs suit-line" id="eastC">-</div>
            </div>
            
            <div class="hand-box south" onclick="showResults()">
                <div class="position-label">SOUTH</div>
                <div class="spades suit-line" id="southS">-</div>
                <div class="hearts suit-line" id="southH">-</div>
                <div class="diamonds suit-line" id="southD">-</div>
                <div class="clubs suit-line" id="southC">-</div>
            </div>
        </div>
        
        <div class="controls">
            <button onclick="previousBoard()">&larr; Previous</button>
            <button onclick="nextBoard()">Next &rarr;</button>
        </div>
        
        <div class="board-counter">
            <span id="boardCounter">Board 1 of 30</span>
        </div>
    </div>
    
    <div class="results-modal" id="resultsModal">
        <div class="results-content">
            <h2 id="resultsTitle">Tournament Results - Board 1</h2>
            <table class="results-table" id="resultsTable"></table>
            <button class="close-results" onclick="closeResults()">Close</button>
        </div>
    </div>
    
    <script>
        let currentBoard = 0;
        let allBoards = [];
        let currentBoardData = null;
        
        async function loadData() {
            try {
                const response = await fetch('hands_database.json?v=' + Date.now());
                const db = await response.json();
                
                const event = db.events['hosgoru_04_01_2026'];
                const boardObj = event.boards;
                
                allBoards = Object.entries(boardObj).map(([num, data]) => ({
                    num: parseInt(num),
                    data: data
                })).sort((a, b) => a.num - b.num);
                
                displayBoard(0);
            } catch (error) {
                console.error('Error:', error);
                document.body.innerHTML += '<p style="color:red;">Error: ' + error.message + '</p>';
            }
        }
        
        function displayBoard(index) {
            if (index < 0 || index >= allBoards.length) return;
            
            currentBoard = index;
            const board = allBoards[index];
            const data = board.data;
            const hands = data.hands;
            
            currentBoardData = board;
            
            document.getElementById('boardNum').textContent = board.num;
            document.getElementById('dealer').textContent = data.dealer || '-';
            document.getElementById('vuln').textContent = data.vulnerability || '-';
            document.getElementById('centerText').textContent = board.num;
            document.getElementById('boardCounter').textContent = `Board ${board.num} of 30`;
            
            const suits = ['S', 'H', 'D', 'C'];
            const suitNames = { S: '♠', H: '♥', D: '♦', C: '♣' };
            const positions = ['North', 'South', 'East', 'West'];
            
            positions.forEach(pos => {
                const hand = hands[pos];
                suits.forEach(suit => {
                    const cards = hand[suit] || '-';
                    const suitSymbol = suitNames[suit];
                    document.getElementById(pos.toLowerCase() + suit).textContent = suitSymbol + ' ' + cards;
                });
            });
        }
        
        function previousBoard() {
            if (currentBoard > 0) {
                displayBoard(currentBoard - 1);
            }
        }
        
        function nextBoard() {
            if (currentBoard < allBoards.length - 1) {
                displayBoard(currentBoard + 1);
            }
        }
        
        function showResults() {
            if (!currentBoardData) return;
            
            const results = currentBoardData.data.results || [];
            const tableHtml = results.map((result, idx) => `
                <tr>
                    <td><strong>${result.pair_names || '-'}</strong></td>
                    <td>${result.direction || '-'}</td>
                    <td>${result.contract || '-'}</td>
                    <td>${result.score || '-'}%</td>
                </tr>
            `).join('');
            
            document.getElementById('resultsTitle').textContent = `Tournament Results - Board ${currentBoardData.num}`;
            document.getElementById('resultsTable').innerHTML = tableHtml || '<tr><td colspan="4">No results available</td></tr>';
            document.getElementById('resultsModal').classList.add('show');
        }
        
        function closeResults() {
            document.getElementById('resultsModal').classList.remove('show');
        }
        
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowUp') previousBoard();
            if (e.key === 'ArrowDown') nextBoard();
            if (e.key === 'Escape') closeResults();
        });
        
        loadData();
    </script>
</body>
</html>

