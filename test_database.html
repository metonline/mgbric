<!DOCTYPE html>
<html>
<head>
    <title>Database Test</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .status { margin: 20px 0; padding: 10px; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
    </style>
</head>
<body>
    <h1>Database YÃ¼kleme Testi</h1>
    <div id="status" class="status info">YÃ¼kleniyor...</div>
    <div id="results"></div>

    <script>
        console.log('ğŸ” Test baÅŸladÄ±...');

        // Test 1: /get_database endpoint'ine istek yap
        fetch('/get_database?v=' + Date.now())
            .then(response => {
                console.log('Response received:', response.status, response.headers.get('content-type'));
                if (!response.ok) throw new Error('HTTP ' + response.status);
                return response.json();
            })
            .then(data => {
                console.log('âœ“ Data parsed:', typeof data, Array.isArray(data), data.length);
                
                let html = `
                    <div class="status success">
                        <strong>âœ“ BaÅŸarÄ±lÄ±!</strong><br>
                        Tip: ${typeof data}<br>
                        Array mi: ${Array.isArray(data)}<br>
                        KayÄ±t sayÄ±sÄ±: ${data.length || 'N/A'}<br>
                        Ä°lk kayÄ±t: ${data[0] ? JSON.stringify(data[0]).substring(0, 100) : 'Yok'}
                    </div>
                `;
                
                document.getElementById('status').innerHTML = html;
                document.getElementById('results').innerHTML = '<pre>' + JSON.stringify(data.slice(0, 3), null, 2) + '</pre>';
            })
            .catch(err => {
                console.error('âŒ Hata:', err);
                document.getElementById('status').innerHTML = `
                    <div class="status error">
                        <strong>âŒ Hata!</strong><br>
                        ${err.message}
                    </div>
                `;
                document.getElementById('results').innerHTML = '<pre>Detay: ' + err.stack + '</pre>';
            });
    </script>
</body>
</html>
